<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order Summary - FLYTAU</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <header class="header-container">
        <div class="header-left-nav">
            <a href="{{ url_for('book_flight', flight_id=flight.flight_id) }}" class="nav-link-orange"> < CHANGE SEATS </a>
        </div>
        <div class="header-center">
            <span class="welcome-text-large">REVIEW & CONFIRM</span>
        </div>
        <div class="header-right-logo">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="FLYTAU" width="100" class="dimmed-logo">
        </div>
    </header>

    <main class="trips-container" style="max-width: 700px;">

        <div style="background: var(--board-bg); border: 1px solid #333; padding: 30px; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.5);">

            <h2 style="font-family: 'Share Tech Mono'; color: var(--neon-orange); margin-top: 0; border-bottom: 1px solid #444; padding-bottom: 15px;">
                ORDER SUMMARY
            </h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                <div>
                    <span style="color: var(--text-muted); font-size: 0.85em; letter-spacing: 1px;">FLIGHT</span>
                    <div style="font-size: 1.2em; font-weight: bold; color: white;">{{ flight.flight_id }}</div>
                </div>
                <div>
                    <span style="color: var(--text-muted); font-size: 0.85em; letter-spacing: 1px;">ROUTE</span>
                    <div style="font-size: 1.2em; font-weight: bold; color: white;">
                        {{ flight.source_airport }} ‚ûù {{ flight.destination_airport }}
                    </div>
                </div>
                <div>
                    <span style="color: var(--text-muted); font-size: 0.85em; letter-spacing: 1px;">DATE</span>
                    <div style="color: #e0e0e0;">{{ flight.departure_date }}</div>
                </div>
                <div>
                    <span style="color: var(--text-muted); font-size: 0.85em; letter-spacing: 1px;">TIME</span>
                    <div style="color: var(--neon-yellow); font-family: 'Share Tech Mono';">{{ flight.departure_time }}</div>
                </div>
            </div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 3px solid var(--accent-blue);">
                <h4 style="margin: 0 0 10px 0; color: var(--accent-blue); font-family: 'Share Tech Mono';">PASSENGER DETAILS</h4>

                {% if current_user.is_authenticated %}
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <span style="color: #888; font-size: 0.8em;">FULL NAME</span>
                            <div style="color: white;">{{ current_user.first_name }} {{ current_user.last_name }}</div>
                        </div>
                        <div>
                            <span style="color: #888; font-size: 0.8em;">PASSPORT NO.</span>
                            <div style="color: var(--neon-yellow);">{{ current_user.passport_num }}</div>
                        </div>
                        <div style="grid-column: span 2;">
                            <span style="color: #888; font-size: 0.8em;">REGISTERED EMAIL</span>
                            <div style="color: white;">{{ current_user.email }}</div>
                        </div>
                    </div>

                {% elif guest %}
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <span style="color: #888; font-size: 0.8em;">GUEST NAME</span>
                            <div style="color: white;">{{ guest.first_name }} {{ guest.last_name }}</div>
                        </div>
                        <div>
                            <span style="color: #888; font-size: 0.8em;">PHONE</span>
                            <div style="color: white;">{{ guest.phone }}</div>
                        </div>
                        <div style="grid-column: span 2;">
                            <span style="color: #888; font-size: 0.8em;">CONTACT EMAIL</span>
                            <div style="color: white;">{{ guest.email }}</div>
                        </div>
                    </div>
                {% endif %}
            </div>

            <div style="margin-bottom: 30px;">
                <span style="color: var(--text-muted); font-size: 0.85em; letter-spacing: 1px;">SELECTED SEATS</span>
                <ul style="list-style: none; padding: 0; margin: 10px 0;">
                    {% for seat in seats %}
                        <li style="background: #111; border: 1px dashed #444; padding: 10px; margin-bottom: 5px; display: flex; justify-content: space-between; align-items: center;">
                            <span>
                                <strong style="color: white; font-size: 1.1em;">{{ seat.row }}{{ seat.col }}</strong>
                                <span style="color: #888; font-size: 0.9em;">({{ seat.class }})</span>
                            </span>
                            <span style="color: var(--neon-green); font-family: 'Share Tech Mono';">${{ seat.price }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #444; padding-top: 20px;">
                <div>
                    <span style="color: #888; font-size: 0.9em;">TOTAL TO PAY</span>
                    <div style="font-size: 2.2em; color: var(--neon-green); font-family: 'Share Tech Mono'; font-weight: bold;">
                        ${{ total }}
                    </div>
                </div>

                <form action="/finalize_booking" method="POST">
                    <input type="hidden" name="flight_id" value="{{ flight.flight_id }}">

                    {% for seat in seats %}
                        <input type="hidden" name="selected_seats" value="{{ seat.key }}">
                    {% endfor %}

                    {% if guest %}
                        <input type="hidden" name="guest_first" value="{{ guest.first_name }}">
                        <input type="hidden" name="guest_last" value="{{ guest.last_name }}">
                        <input type="hidden" name="guest_email" value="{{ guest.email }}">
                        <input type="hidden" name="guest_phone" value="{{ guest.phone }}">
                    {% endif %}

                    <button type="submit" class="btn-next" style="background: var(--neon-green); color: black; padding: 15px 30px; font-size: 1em; border-radius: 6px;">
                        CONFIRM & PAY NOW
                    </button>
                </form>
            </div>

        </div>
    </main>
</body>
</html>