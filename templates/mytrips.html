<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Trips - FLYTAU</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <header>
        <div class="header-container">
            <div class="header-left">
                <a href="/" class="btn-back">← BACK TO DEPARTURES</a>
            </div>
            <div class="header-right-logo">
                 <img src="{{ url_for('static', filename='logo.png') }}" alt="FLYTAU Logo" class="logo dimmed-logo" width="100">
            </div>
        </div>
    </header>

    <div class="main-content" style="padding-top: 20px;">

        <div class="filter-container">
            <span class="filter-label">FILTER STATUS:</span>
            <div class="filter-options">
                <a href="{{ url_for('my_trips', status='All') }}"
                   class="filter-btn {{ 'active' if current_filter == 'All' else '' }}">ALL</a>

                <a href="{{ url_for('my_trips', status='Active') }}"
                   class="filter-btn {{ 'active' if current_filter == 'Active' else '' }}">ACTIVE</a>

                <a href="{{ url_for('my_trips', status='Executed') }}"
                   class="filter-btn {{ 'active' if current_filter == 'Executed' else '' }}">COMPLETED</a>

                <a href="{{ url_for('my_trips', status='Cancelled') }}"
                   class="filter-btn {{ 'active' if current_filter == 'Cancelled' else '' }}">CANCELLED</a>
            </div>
        </div>

        <div class="trips-container">
            {% if orders %}
                {% for order in orders %}
                <div class="trip-card">
                    <div class="trip-header">
                        <span class="trip-code">#{{ order.order_code }}</span>
                        <span class="trip-date">{{ order.order_date }}</span>
                    </div>

                    <div class="trip-route">
                        <span class="airport-code">{{ order.source_airport }}</span>
                        <span class="arrow">➝</span>
                        <span class="airport-code">{{ order.destination_airport }}</span>
                    </div>

                    <div class="trip-details">
                        <div class="detail-item">
                            <span class="label">DEPARTURE</span>
                            <span class="value">{{ order.departure_date }} {{ order.departure_time }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">TICKETS</span>
                            <span class="value">{{ order.ticket_count }}</span>
                        </div>
                         <div class="detail-item">
                            <span class="label">TOTAL</span>
                            <span class="value">${{ order.total_price }}</span>
                        </div>
                    </div>

                    <div class="trip-footer">
                        <span class="status-badge status-{{ order.status.split(' ')[0]|lower }}">
                            {{ order.status|upper }}
                        </span>

                        {% if order.status == 'Active' %}
                        <form action="{{ url_for('cancel_order', order_code=order.order_code) }}" method="POST" onsubmit="return confirm('Cancel this order? A 5% fee applies.');">
                            <button type="submit" class="btn-cancel-trip">CANCEL ORDER</button>
                        </form>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-trips">
                    <h3>NO FLIGHTS FOUND</h3>
                    <p>No trips match your current filter.</p>
                </div>
            {% endif %}
        </div>
    </div>

</body>
</html>