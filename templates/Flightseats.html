<h2>Select Your Seats - Flight {{ flight_id }}</h2>

<form action="/complete_booking" method="POST">
    <input type="hidden" name="flight_id" value="{{ flight_id }}">

    <div class="seat-map">
        {% for seat in all_seats %}
            <div class="seat">
                <input type="checkbox" name="selected_seats" value="{{ seat.row_num }}-{{ seat.column_num }}"
                       {% if seat.is_taken %} disabled {% endif %}>
                <label>{{ seat.row_num }}{{ seat.column_num }}
                    ({{ "Taken" if seat.is_taken else "Available" }})
                </label>
            </div>
        {% endfor %}
    </div>

    <hr>

    {% if not current_user.is_authenticated %}
        <h3>Guest Information</h3>
        <p>Please provide your details to complete the booking:</p>
        <input type="text" name="guest_first" placeholder="First Name" required>
        <input type="text" name="guest_middle" placeholder="Middle Name (Optional)">
        <input type="text" name="guest_last" placeholder="Last Name" required>
        <input type="email" name="guest_email" placeholder="Email" required>
        <input type="text" name="guest_phone" placeholder="Phone" required>
    {% else %}
        <p>Logged in as: {{ current_user.name }}. Your saved details will be used.</p>
    {% endif %}

    <button type="submit">Proceed to Payment</button>
</form>